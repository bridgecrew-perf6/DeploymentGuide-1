<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lets Deploy!</title>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous"> -->
</head>

<body class="container">
    <h1>Deploy SpringBoot Maven project</h1>
    <p>
        The purpose of this site is to make deploying your capstones as easy as possible.
    </p>
    <p>To make this guide work fill in all fields Otherwise required data might be missing when generating commands.</p>
    <section id="domainSetup">

        <h2>Domain Setup</h2>

        <p>Before we go about setting up a server to host our website we need to purchase and setup a domain for said
            website.</p>

        <h3>Step 1</h3>

        <p>First we need to purchase a domain, I recommned NameCheap.</p>

        <label for="nameCheapDomainSearchField">Domain Search</label>
        <input type="text" name="nameCheapDomainSearch" id="nameCheapDomainSearchField">
        <button id="DomainSearchButton">Find Domains</button>

        <h3>Step 2</h3>

        <p>Enter your purchased domian in the field below</p>

        <Label for="domainNameField">Domain Name</Label>
        <input placeholder="website.com" type="text" name="domainNameField" id="domainNameField">

        <h3>Step 3</h3>

        <p>Next we need to go to the domain's control panel, and point our domian to our hosting service.</p>
        <button id="domainControlPanelButton">Domain Control Panel</button>

        <p>Under the option called NAMESERVERS click Namecheap BasicDNS, a dropdown will appear.</p>
        <p>select Custom DNS from the dropdown menu. Two additional fields will appear.</p>
        <p>Select the ADD NAMESERVER button</p>

        <p>enter the following text in the fields </p>
        <label class="font-monospace" for="ns1Field">1st field</label> <code id="ns1Field">ns1.digitalocean.com</code>
        <input type="button" value="copy" id="nsOneCopy">
        <br>

        <label class="font-monospace" for="ns2Field">2nd field</label> <code id="ns2Field">ns2.digitalocean.com</code>
        <input type="button" value="copy" id="nsTwoCopy">

        <br>

        <label class="font-monospace" for="ns3Field">3rd field</label> <code id="ns3Field">ns3.digitalocean.com</code>
        <input type="button" value="copy" id="nsThreeCopy">

        <h3>Step 4</h3>
        <p>Confirm changes by clicking green checkmark</p>

        <h3>Congratulations your domain is ready!</h3>

    </section>

    <br>

    <section>

        <h2>Setting up droplet</h2>

        <h3>Step 1</h3>
        <p>Head to DigitalOcean and login or setup account</p>
        <a target="_blank" href="https://cloud.digitalocean.com/login">Digitalocean Login</a>

        <h3>Step 2</h3>
        <p>Navigate to Digital Ocean New Droplet page</p>
        <a target="_blank" href="https://cloud.digitalocean.com/droplets/new">Digitalocean Droplets</a>

        <h3>Step 3</h3>
        <p>Under Distributions select Debian v10 x64</p>

        <h3>Step 4</h3>
        <p>Under plan make sure Basic is selected and select 10/mo plan</p>
        <p>You may have to scroll to the left to see the 10/mo plan</p>

        <h3>Step 5</h3>
        <p>Under datacenter region make sure New York or San Francisco is selected</p>

        <h3>Step 6</h3>
        <p>Under Authentication make sure SSH Keys is selected</p>

        <h3>Step 7</h3>
        <p>Click New SSH Key</p>

        <h3>Step 8</h3>
        <p>put the following commnad in your terminal. This will copy your SSH key to your ClipBoard.</p>
        <p><code>cat ~/.ssh/id_rsa.pub | pbcopy</code></p>
        <input type="button" value="copy" id="copySshCommandButton">

        <h3>Step 9</h3>
        <p>Paste into the SHH Key content field</p>

        <h3>Step 10</h3>
        <p>In the Name field name your shh key based on what machine you are on.</p>
        <p>Ex: michael_scott_MacBookPro</p>

        <h3>Step 11</h3>
        <p>Click Add SSH Key Button</p>

        <h3>Step 12</h3>
        <p>In the Choose a hostname field put the name of your droplet.</p>
        <p>Ex: springBlog_droplet</p>

        <h3>Step 13</h3>
        <p>Select The project you would like to add this droplet too.</p>

        <h3>Step 14</h3>
        <p>Click Create Droplet Button</p>

        <h3>Step 15</h3>
        <p>You will be redirected and will see your droplet being created</p>
        <p>When the loading bar on your droplet is complete you will see the droplet's ip address.</p>
        <p>Copy the droplet's ip address and paste it in the field below.</p>
        <input type="text" id="serverIpField" placeholder="333.22.333.22">

        <h3>You have Created your Droplet!!</h2>

    </section>

    <br>

    <section>
        <h2>Hosting service set up</h2>

        <p>Now that we have a domain ready and pointing to our hosting service we need to get that hosting service ready
        </p>

        <h3>Step 1</h3>
        <p>Navigate to the Digitalocean networking tab</p>
        <a target="_blank" href="https://cloud.digitalocean.com/networking">Digitalocean Networking</a>

        <h3>Step 2</h3>
        <p>Next you need to add your domian to field under Add a domain.</p>
        <p><code id="AddNewDomainText">something.com</code></p>
        <input type="button" value="copy" id="AddNewDomainCopyButton">

        <h3>Step 3</h3>
        <p>Enter @ into the hostname field.</p>

        <h3>Step 4</h3>
        <p>Choose your droplet under will direct to.</p>

        <h3>Step 5</h3>
        <p>Click Create Record button.</p>

        <h3>Step 6</h3>
        <p>Click CNAME under create a new record.</p>

        <h3>step 7</h3>
        <p>Enter * for hostname field</p>

        <h3>Step 8</h3>
        <p>Enter @ in the Is an Alias Of field</p>

        <h3>step 9</h3>
        <p>Click Create Record button</p>

        <h3>You have Set up your Hosting Service!!</h3>

    </section>

    <section>
        <h2>Preping Application for Deployment</h2>
        <br>

        <h3>Step 1</h3>
        <p>Make sure your application works!!</p>
        <p>Your app must be able to compile succesfully on your local machine before you continue</p>

        <h3>Step 2</h3>
        <p>If you do not have intergrations in your application you will need to add the following to your
            <code>pom.xml</code></p>
        <pre>
<code>
    ...
    &#60;properties&#62; 
        ...
        &#60;skipTests&#62;true&#60;/skipTests&#62;
        ... 
    &#60;/properties&#62; 
    ... 
</code>
        </pre>

        <h3>Step 3</h3>
        <p>Open a new terminal in your intellij project and run the following command</p>
        <p><code>./mvnw package</code></p>
        <input type="button" value="copy" id="copyMavenPackageCommandButton">


        <h3>Step 4</h3>
        <p>If your application packaged succesfully you can move to the next step</p>
        <p>Otherwise you will need to fix all errors and repeat step 3</p>

        <h3>Step 5</h3>
        <p>Next we need to find the location of your output jar file</p>
        <p>You can do so by running the following command in your project's terminal</p>
        <p><code>find target -name \*.jar</code></p>
        <input type="button" value="copy" id="findJarFileButton">

        <h3>Step 6</h3>
        <p>Next Paste the result of the command in the field below.</p>
        <input type="text" id="findTargetResult">

        <h3>Step 7</h3>
        <p>Now lets run our application from the command line.</p>
        <p>Run the following command in your project's terminal</p>
        <p><code id="runJarFileCommand">java -jar YOUR_JAR_FILE</code></p>
        <input type="button" value="copy" id="runJarFileCommandCopy">

        <h3>Step 8</h3>
        <p>Once your application has succesfully started up, you can use press Ctrl-C.</p>
        <p>This will stop the application so we can move forward.</p>

        <h3>Step 9</h3>
        <p>The Following command will create a <code>cods.</code> file in the root of your project.</p>
        <p>
        <pre><code id="codsFileCreationCommand"></code></pre>
        </p>
        <input type="button" value="copy" id="codsFileCreationCommandText">

        <h3>Step 10</h3>
        <p>Make sure the following code is in the <code>cods.</code> file.</p>
        <p>
        <pre><code id="codsFileText"></code></pre>
        </p>

        <h3>Step 11</h3>
        <p>Next is to make sure that the <code>cods.</code> file is all set up and good to go.</p>
        <p>
        <pre><code id="codsFileIntergrityCommandText"></code></pre>
        </p>
        <input type="button" value="copy" id="codsFileIntergrityCommandButton">

        <h3>You have succesfully set up your application for deployment!</h3>

    </section>

    <section>
        <h2>Server Set up</h2>
        <br>

        <h3>Step 1</h3>
        <p>We need to install the cods tool</p>
        <p><code>brew install zgulde/zgulde/cods</code></p>
        <input type="button" value="copy" id="zguldeCodsToolButton">

        <h3>Step 2</h3>
        <p>Decide what you would like to name your server</p>
        <p>Ex: springBootServer</p>
        <input type="text" id="serverNameField" placeholder="springBootServer">



        <h3>Step 3</h3>
        <p>Now we can use the cods tool to make a connection to your server</p>
        <p><code id="serverInitcommand">cods init springBootServer</code></p>
        <input type="button" value="copy" id="serverInitcommandCopy">


        <h3>Step 4</h3>
        <p>You will be prompted for your server's ip address</p>
        <p><code id="dropletIpAddress">333.22.333.22</code></p>
        <input type="button" value="copy" id="dropletIpAddressCopy">

        <h3>Step 5</h3>
        <p>When prompted for a username you can just use the default username</p>
        <p>Enter the username that you have chossen in the field below.</p>
        <input type="text" id="serverUserName">

        <h3>Step 6</h3>
        <p>Next it will ask you for an email, this is for recovery purposes.</p>

        <h3>Step 7</h3>
        <p>The cods tool will now go through the proccess of setting up your server</p>
        <p>Get some popcorn it could be awhile. . .</p>

        <h3>Step 8</h3>
        <p>When the cods tool is finished you can put the following in your terminal to what commands are aviable to
            you.</p>
        <p><code id="serverRefferenceCommand">springBootServer</code></p>
        <input type="button" value="copy" id="serverRefferenceCommandButtonCopy">

        <h3>Step 9</h3>
        <p>Lets run the server credentials command to get our credentials for our server</p>
        <p><code id="serverCredentialsCommand">springBootServer credentials | pbcopy</code></p>
        <input type="button" value="copy" id="serverCredentialsCommandButtonCopy">

        <h3>Step 10</h3>
        <p>When you run the command above, it will automatically copy the servers credentials to your clipboard, paste them in the field below.</p>
        <input type="text" id="serverCredentails">


        <h3>Congratulations You have set up your connection to the server</h3>
        <br>
    </section>

    <section>
        <h2>Server-Side MySQL Database Setup</h2>
        <br>

        <h3>Step 1</h3>
        <p>First we need to login to our server.</p>
        <p><code id="serverLoginCommand">springBootServer login</code></p>
        <input type="button" value="copy" id="serverLoginCommandButtonCopy">

        <h3>Step 2</h3>
        <p>Lets configure our MySQL install on our Droplet</p>
        <p>
        <pre><code id="configMySQLCommandText"></code></pre>
        </p>
        <input type="button" value="copy" id="mySQLconfigCommandCopy">

        <h3>Step 3</h3>
        <p>When prompted Select "MySQL Server & Cluster".</p>

        <h3>Step 4</h3>
        <p>Next select v5.7</p>

        <h3>Step 5</h3>
        <p>Next install mySQL on the droplet</p>
        <p><code id="installMySQLCommandText">apt update && apt install -y mysql-server</code></p>
        <input type="button" value="copy" id="mySQLinstallCommandCopy">

        <h3>Step 6</h3>
        <p>You will be prompted for a password, leave this blank and proceed.</p>

        <h3>Step 7</h3>
        <p>When the installation is complete we need to log into MySQL on our droplet.</p>
        <p><code>mysql -u root</code></p>
        <input type="button" value="copy" id="mySQLloginCommandCopy">

        <h3>Step 8</h3>
        <p>Next lets create our admin user for MySQL</p>
        <p>
        <pre><code id="mySQLamdinUserCommandText"></code></pre>
        </p>
        <input type="button" value="copy" id="mySQLadminUserCommandCopy">

        <h3>Step 9</h3>
        <p>Now we can log out of our Server</p>
        <p><code>exit</code></p>
        <input type="button" value="copy" id="exitServerCommandCopy">

        <br>

        <h3>You have setup MySQL on your Server!!</h3>

    </section>

    <section>
        <h2>Setting up Application Db User</h2>
        <p>Next we will be setting up a database and user for our database.</p>

        <h3>Step 1</h3>
        <p>In the field below put what you would like your Application Database to be named.</p>
        <input type="text" id="appDbName" placeholder="blog_db">
        
        <h3>Step 2</h3>
        <p>In the field below put what you would like your Application Database's user to be named.</p>
        <input type="text" id="appDbUser" placeholder="blog_user">

        <h3>Step 3</h3>
        <p>The following command will create both a database and user for your application.</p>
        <p><code id="serverCreateDbandUserCommandText">myserver db create --name blog_db --user blog_user</code></p>
        <input type="button" value="copy" id="serverCreateDbandUserCommandCopy">

        <h3>Step 4</h3>
        <p>You will be promted for your DB's admin password</p>
        <p>Paste the password from below into the terminal to procceed.</p>
        <p><code id="ServerCreateDbPassText"></code></p>
        <input type="button" value="copy" id="ServerCreateDbSudoPassCopy">


        <h3>Step 5</h3>
        <p>The next command will prepair your server for your site.</p>
        <p><code id="createSiteCommandText">springBootServer site create --domain something.com --java --spring-boot --port 8080</code></p>
        <input type="button" value="copy" id="createSiteCommandCopy">

        <h3>Step 6</h3>
        <p>Our credentials have been updated</p><p> run the server credentials command to get our credentials for our server</p>
        <p><code id="serverCredentialsCommandTextTwo">springBootServer credentials</code></p>
        <input type="button" value="copy" id="serverCredentialsCommandButtonCopyTwo">

        <h3>Step 7</h3>
        <p>When you run the command in the terinal it will copy the results to your clipboard, paste in the field below.</p>
        <input type="text" id="secondServerCredentails">

        <h3>Step 8</h3>
        <p>Open a new terminal in the root of your project if one is not open already</p>
        <p>Run the command below into project terminal.</p>
        <p><code id="propertiesUploadCommandText">myserver upload --file src/main/resources/application.properties --destination /srv/example.com/application.properties</code></p>
        <input type="button" value="copy" id="propertiesUploadCommandCopy">

        <h3>Step 9</h3>
        <p>Now we need to edit the file we just uploaded to work with our MySQL on the server.</p>
        <p><code id="fileEditCommandText">myserver run nano /srv/example.com/application.properties</code></p>
        <input type="button" value="copy" id="fileEditCommandCopy">

        <h3>Step 10</h3>
        <p>This will open the Nano text editor so we can make required changes.</p>
        <p>Make sure the following feilds look as such.</p>
        <p><code id="dataSourceURLText"></code></p>
        <p><code id="dataSourceUSERNAMEText"></code></p>
        <p><code id="dataSourcePASSText"></code></p>

        <h3>Step 11</h3>
        <p>Once we have edited the properties file server side we need to save the changes.</p>
        <p>Do the following</p>
        <ol>
            <li>Ctrl-x</li>
            <li>Type y</li>
            <li>Press Enter</li>
        </ol>

        <h3>Step 12</h3>
        <p>Now lets add our remote</p>
        <p><code id="addRemoteCommandText">git remote add production username@333.22.333.22:/srv/something.com/repo.git</code></p>
        <input type="button" value="copy" id="addRemoteCommandCopy">

        <h3>Step 13</h3>
        <p>now that we have added our remote lets push our project to the server</p>
        <p><code>git push production master</code></p>
        <input type="button" value="copy" id="pushProductionCommandCopy">

        <br>
        <h3>Congratulations you're done!</h3>


    </section>



    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="./index.js"></script>

</body>

</html>